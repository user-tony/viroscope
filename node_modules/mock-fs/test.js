/* This will print
    With mock 2
    With native 1
 
   when we would actually want it to print the same, no matter if the mock fs or the native fs module is used.
*/
 
var async = require("async");
var fs = require("fs");
var mockfs = require("./lib/").fs({"/tmp": {}});
 
 
async.waterfall([
        function(callback) {
           fs.mkdir("/tmp/test", callback);
        },
        function() {
            console.log("With native", arguments.length);
 
            // Async always adds a callback as the last argument
            arguments[arguments.length-1]();
        }
    ],
    function (err, results) {
        console.error('error', err);
    });
 
 
async.waterfall([
        function(callback) {
           mockfs.mkdir("/tmp/test", callback);
        },
        function() {
            console.log("With mock", arguments.length);
 
            // Async always adds a callback as the last argument
            arguments[arguments.length-1]();
        }
    ],
    function (err, results) {
        console.error('error', err);
    });